import { Path } from "scripts/utils/path";
import { MarkdownRenderer } from "./markdown-renderer";
import { MainSettings } from "scripts/settings/main-settings";
export var RenderLog;
(function (RenderLog) {
    RenderLog.fullLog = "";
    function log(message, messageTitle = "") {
        pullPathLogs();
        RenderLog.fullLog += messageTitle + ": \n" + JSON.stringify(message).replaceAll("\n", "\n\t\t") + "\n\n";
        if (MainSettings.loaded && !(MainSettings.settings.logLevel == "all"))
            return;
        if (messageTitle != "")
            console.info(messageTitle + " ", message);
        else
            console.info(message);
        MarkdownRenderer._reportInfo(messageTitle, message);
    }
    RenderLog.log = log;
    function warning(message, messageTitle = "") {
        pullPathLogs();
        RenderLog.fullLog += messageTitle + ": \n" + JSON.stringify(message).replaceAll("\n", "\n\t\t") + "\n\n";
        if (MainSettings.loaded && !["warning", "all"].contains(MainSettings.settings.logLevel))
            return;
        if (messageTitle != "")
            console.warn(messageTitle + " ", message);
        else
            console.warn(message);
        MarkdownRenderer._reportWarning(messageTitle, message);
    }
    RenderLog.warning = warning;
    function error(message, messageTitle = "", fatal = false) {
        pullPathLogs();
        RenderLog.fullLog += messageTitle + ": \n" + JSON.stringify(message).replaceAll("\n", "\n\t\t") + "\n\n";
        if (MainSettings.loaded && !fatal && !["error", "warning", "all"].contains(MainSettings.settings.logLevel))
            return;
        if (fatal && messageTitle == "Error")
            messageTitle = "Fatal Error";
        if (messageTitle != "")
            console.error(messageTitle + " ", message);
        else
            console.error(message);
        MarkdownRenderer._reportError(messageTitle, message, fatal);
    }
    RenderLog.error = error;
    function progress(complete, total, message, subMessage, progressColor = "var(--color-accent)") {
        pullPathLogs();
        MarkdownRenderer._reportProgress(complete, total, message, subMessage, progressColor);
    }
    RenderLog.progress = progress;
    function pullPathLogs() {
        let logs = Path.dequeueLog();
        for (let thisLog of logs) {
            switch (thisLog.type) {
                case "info":
                    log(thisLog.message, thisLog.title);
                    break;
                case "warn":
                    warning(thisLog.message, thisLog.title);
                    break;
                case "error":
                    error(thisLog.message, thisLog.title, false);
                    break;
                case "fatal":
                    error(thisLog.message, thisLog.title, true);
                    break;
            }
        }
    }
    function getDebugInfo() {
        let debugInfo = "";
        debugInfo += `${RenderLog.fullLog}\n\n\n`;
        debugInfo += `Plugin Version: ${MainSettings.settings.settingsVersion}\n`;
        debugInfo += `Updated From: ${MainSettings.settings.upgradedFrom}\n`;
        debugInfo += `Settings:\n ${JSON.stringify(MainSettings.settings, null, 2).split("\n").join("\n\t\t")}\n\n`;
        // @ts-ignore
        let loadedPlugins = Object.values(app.plugins.plugins).filter((plugin) => plugin._loaded == true).map((plugin) => plugin.manifest.name).join("\n\t\t");
        debugInfo += `Enabled Plugins:\n ${loadedPlugins}\n\n`;
        return debugInfo;
    }
    function testThrowError(chance) {
        if (Math.random() < chance) {
            throw new Error("Test error");
        }
    }
    RenderLog.testThrowError = testThrowError;
})(RenderLog || (RenderLog = {}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyLWxvZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlbmRlci1sb2cudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQzFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxnQ0FBZ0MsQ0FBQztBQUk5RCxNQUFNLEtBQVcsU0FBUyxDQStGekI7QUEvRkQsV0FBaUIsU0FBUztJQUVYLGlCQUFPLEdBQVcsRUFBRSxDQUFDO0lBRWhDLFNBQWdCLEdBQUcsQ0FBQyxPQUFZLEVBQUUsZUFBdUIsRUFBRTtRQUV2RCxZQUFZLEVBQUUsQ0FBQztRQUNmLFVBQUEsT0FBTyxJQUFJLFlBQVksR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxHQUFHLE1BQU0sQ0FBQztRQUVyRyxJQUFHLFlBQVksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQztZQUFFLE9BQU87UUFFdkUsSUFBSSxZQUFZLElBQUksRUFBRTtZQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxHQUFHLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQzs7WUFDN0QsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMzQixnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFWZSxhQUFHLE1BVWxCLENBQUE7SUFFRCxTQUFnQixPQUFPLENBQUMsT0FBWSxFQUFFLGVBQXVCLEVBQUU7UUFFM0QsWUFBWSxFQUFFLENBQUM7UUFDZixVQUFBLE9BQU8sSUFBSSxZQUFZLEdBQUcsTUFBTSxHQUFHLElBQUks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QUcsRUFBRSxDQUFDO1FBRW5CLFNBQVMsSUFBSSxHQUFHLFVBQUEsT0FBTyxRQUFRLENBQUM7UUFDaEMsU0FBUyxJQUFJLG1CQUFtQixZQUFZLENBQUMsUUFBUSxDQUFDLGVBQWUsSUFBSSxDQUFDO1FBQzFFLFNBQVMsSUFBSSxpQkFBaUIsWUFBWSxDQUFDLFFBQVEsQ0FBQyxZQUFZLElBQUksQ0FBQztRQUNyRSxTQUFTLElBQUksZUFBZSxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztRQUU1RyxhQUFhO1FBQ2IsSUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZKLFNBQVMsSUFBSSxzQkFBc0IsYUFBYSxNQUFNLENBQUM7UUFFdkQsT0FBTyxTQUFTLENBQUM7SUFDckIsQ0FBQztJQUVELFNBQWdCLGNBQWMsQ0FBQyxNQUFjO1FBRXpDLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLE1BQU0sRUFDMUI7WUFDSSxNQUFNLElBQUksS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1NBQ2pDO0lBQ0wsQ0FBQztJQU5lLHdCQUFjLGlCQU03QixDQUFBO0FBQ0wsQ0FBQyxFQS9GZ0IsU0FBUyxLQUFULFNBQVMsUUErRnpCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGF0aCB9IGZyb20gXCJzY3JpcHRzL3V0aWxzL3BhdGhcIjtcclxuaW1wb3J0IHsgTWFya2Rvd25SZW5kZXJlciB9IGZyb20gXCIuL21hcmtkb3duLXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IE1haW5TZXR0aW5ncyB9IGZyb20gXCJzY3JpcHRzL3NldHRpbmdzL21haW4tc2V0dGluZ3NcIjtcclxuaW1wb3J0IEhUTUxFeHBvcnRQbHVnaW4gZnJvbSBcInNjcmlwdHMvbWFpblwiO1xyXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBuYW1lc3BhY2UgUmVuZGVyTG9nXHJcbntcclxuICAgIGV4cG9ydCBsZXQgZnVsbExvZzogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbG9nKG1lc3NhZ2U6IGFueSwgbWVzc2FnZVRpdGxlOiBzdHJpbmcgPSBcIlwiKVxyXG4gICAge1xyXG4gICAgICAgIHB1bGxQYXRoTG9ncygpO1xyXG4gICAgICAgIGZ1bGxMb2cgKz0gbWVzc2FnZVRpdGxlICsgXCI6IFxcblwiICsgSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkucmVwbGFjZUFsbChcIlxcblwiLCBcIlxcblxcdFxcdFwiKSArIFwiXFxuXFxuXCI7XHJcblxyXG5cdFx0aWYoTWFpblNldHRpbmdzLmxvYWRlZCAmJiAhKE1haW5TZXR0aW5ncy5zZXR0aW5ncy5sb2dMZXZlbCA9PSBcImFsbFwiKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAobWVzc2FnZVRpdGxlICE9IFwiXCIpIGNvbnNvbGUuaW5mbyhtZXNzYWdlVGl0bGUgKyBcIiBcIiwgbWVzc2FnZSk7XHJcbiAgICAgICAgZWxzZSBjb25zb2xlLmluZm8obWVzc2FnZSk7XHJcbiAgICAgICAgTWFya2Rvd25SZW5kZXJlci5fcmVwb3J0SW5mbyhtZXNzYWdlVGl0bGUsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2U6IGFueSwgbWVzc2FnZVRpdGxlOiBzdHJpbmcgPSBcIlwiKVxyXG4gICAge1xyXG4gICAgICAgIHB1bGxQYXRoTG9ncygpO1xyXG4gICAgICAgIGZ1bGxMb2cgKz0gbWVzc2FnZVRpdGxlICsgXCI6IFxcblwiICsgSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkucmVwbGFjZUFsbChcIlxcblwiLCBcIlxcblxcdFxcdFwiKSArIFwiXFxuXFxuXCI7XHJcblxyXG5cdFx0aWYoTWFpblNldHRpbmdzLmxvYWRlZCAmJiAhW1wid2FybmluZ1wiLCBcImFsbFwiXS5jb250YWlucyhNYWluU2V0dGluZ3Muc2V0dGluZ3MubG9nTGV2ZWwpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGlmIChtZXNzYWdlVGl0bGUgIT0gXCJcIikgY29uc29sZS53YXJuKG1lc3NhZ2VUaXRsZSArIFwiIFwiLCBtZXNzYWdlKTtcclxuICAgICAgICBlbHNlIGNvbnNvbGUud2FybihtZXNzYWdlKTtcclxuICAgICAgICBNYXJrZG93blJlbmRlcmVyLl9yZXBvcnRXYXJuaW5nKG1lc3NhZ2VUaXRsZSwgbWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2U6IGFueSwgbWVzc2FnZVRpdGxlOiBzdHJpbmcgPSBcIlwiLCBmYXRhbDogYm9vbGVhbiA9IGZhbHNlKVxyXG4gICAge1xyXG4gICAgICAgIHB1bGxQYXRoTG9ncygpO1xyXG4gICAgICAgIGZ1bGxMb2cgKz0gbWVzc2FnZVRpdGxlICsgXCI6IFxcblwiICsgSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkucmVwbGFjZUFsbChcIlxcblwiLCBcIlxcblxcdFxcdFwiKSArIFwiXFxuXFxuXCI7XHJcblxyXG4gICAgICAgIGlmIChNYWluU2V0dGluZ3MubG9hZGVkICYmICFmYXRhbCAmJiAhW1wiZXJyb3JcIiwgXCJ3YXJuaW5nXCIsIFwiYWxsXCJdLmNvbnRhaW5zKE1haW5TZXR0aW5ncy5zZXR0aW5ncy5sb2dMZXZlbCkpIHJldHVybjtcclxuXHRcdFxyXG4gICAgICAgIGlmIChmYXRhbCAmJiBtZXNzYWdlVGl0bGUgPT0gXCJFcnJvclwiKSBtZXNzYWdlVGl0bGUgPSBcIkZhdGFsIEVycm9yXCI7XHJcblxyXG4gICAgICAgIGlmIChtZXNzYWdlVGl0bGUgIT0gXCJcIikgY29uc29sZS5lcnJvcihtZXNzYWdlVGl0bGUgKyBcIiBcIiwgbWVzc2FnZSk7XHJcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xyXG5cclxuICAgICAgICBNYXJrZG93blJlbmRlcmVyLl9yZXBvcnRFcnJvcihtZXNzYWdlVGl0bGUsIG1lc3NhZ2UsIGZhdGFsKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcHJvZ3Jlc3MoY29tcGxldGU6IG51bWJlciwgdG90YWw6bnVtYmVyLCBtZXNzYWdlOiBzdHJpbmcsIHN1Yk1lc3NhZ2U6IHN0cmluZywgcHJvZ3Jlc3NDb2xvcjogc3RyaW5nID0gXCJ2YXIoLS1jb2xvci1hY2NlbnQpXCIpXHJcbiAgICB7XHJcbiAgICAgICAgcHVsbFBhdGhMb2dzKCk7XHJcbiAgICAgICAgTWFya2Rvd25SZW5kZXJlci5fcmVwb3J0UHJvZ3Jlc3MoY29tcGxldGUsIHRvdGFsLCBtZXNzYWdlLCBzdWJNZXNzYWdlLCBwcm9ncmVzc0NvbG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBwdWxsUGF0aExvZ3MoKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBsb2dzID0gUGF0aC5kZXF1ZXVlTG9nKCk7XHJcbiAgICAgICAgZm9yIChsZXQgdGhpc0xvZyBvZiBsb2dzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzTG9nLnR5cGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJpbmZvXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nKHRoaXNMb2cubWVzc2FnZSwgdGhpc0xvZy50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwid2FyblwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmcodGhpc0xvZy5tZXNzYWdlLCB0aGlzTG9nLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yKHRoaXNMb2cubWVzc2FnZSwgdGhpc0xvZy50aXRsZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZhdGFsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IodGhpc0xvZy5tZXNzYWdlLCB0aGlzTG9nLnRpdGxlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXREZWJ1Z0luZm8oKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBkZWJ1Z0luZm8gPSBcIlwiO1xyXG5cclxuICAgICAgICBkZWJ1Z0luZm8gKz0gYCR7ZnVsbExvZ31cXG5cXG5cXG5gO1xyXG4gICAgICAgIGRlYnVnSW5mbyArPSBgUGx1Z2luIFZlcnNpb246ICR7TWFpblNldHRpbmdzLnNldHRpbmdzLnNldHRpbmdzVmVyc2lvbn1cXG5gO1xyXG4gICAgICAgIGRlYnVnSW5mbyArPSBgVXBkYXRlZCBGcm9tOiAke01haW5TZXR0aW5ncy5zZXR0aW5ncy51cGdyYWRlZEZyb219XFxuYDtcclxuICAgICAgICBkZWJ1Z0luZm8gKz0gYFNldHRpbmdzOlxcbiAke0pTT04uc3RyaW5naWZ5KE1haW5TZXR0aW5ncy5zZXR0aW5ncywgbnVsbCwgMikuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcblxcdFxcdFwiKX1cXG5cXG5gO1xyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgbGV0IGxvYWRlZFBsdWdpbnMgPSBPYmplY3QudmFsdWVzKGFwcC5wbHVnaW5zLnBsdWdpbnMpLmZpbHRlcigocGx1Z2luKSA9PiBwbHVnaW4uX2xvYWRlZCA9PSB0cnVlKS5tYXAoKHBsdWdpbikgPT4gcGx1Z2luLm1hbmlmZXN0Lm5hbWUpLmpvaW4oXCJcXG5cXHRcXHRcIik7XHJcbiAgICAgICAgZGVidWdJbmZvICs9IGBFbmFibGVkIFBsdWdpbnM6XFxuICR7bG9hZGVkUGx1Z2luc31cXG5cXG5gO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVidWdJbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0ZXN0VGhyb3dFcnJvcihjaGFuY2U6IG51bWJlcilcclxuICAgIHtcclxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IGNoYW5jZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRlc3QgZXJyb3JcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==