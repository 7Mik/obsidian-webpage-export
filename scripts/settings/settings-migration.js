import { __awaiter } from "tslib";
import HTMLExportPlugin from "scripts/main";
import { MainSettings } from "./main-settings";
import { RenderLog } from "scripts/html-generation/render-log";
export function migrateSettings(settings) {
    return __awaiter(this, void 0, void 0, function* () {
        if (settings.settingsVersion == HTMLExportPlugin.pluginVersion)
            return;
        if ((settings.settingsVersion == "1.7.3" || settings.settingsVersion == "0.0.0") && HTMLExportPlugin.pluginVersion == "1.7.4") {
            settings.incrementalExport = false;
            settings.deleteOldExportedFiles = false;
        }
        RenderLog.log("Migrating webpage-html-export settings from " + settings.settingsVersion + " to " + HTMLExportPlugin.pluginVersion);
        settings.upgradedFrom = settings.settingsVersion;
        settings.settingsVersion = HTMLExportPlugin.pluginVersion;
        yield MainSettings.saveSettings();
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZ3MtbWlncmF0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2V0dGluZ3MtbWlncmF0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLGdCQUFnQixNQUFNLGNBQWMsQ0FBQTtBQUMzQyxPQUFPLEVBQUUsWUFBWSxFQUFvQixNQUFNLGlCQUFpQixDQUFBO0FBQ2hFLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUcvRCxNQUFNLFVBQWdCLGVBQWUsQ0FBQyxRQUEwQjs7UUFFNUQsSUFBSSxRQUFRLENBQUMsZUFBZSxJQUFJLGdCQUFnQixDQUFDLGFBQWE7WUFBRSxPQUFPO1FBRXZFLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxJQUFJLE9BQU8sSUFBSSxRQUFRLENBQUMsZUFBZSxJQUFJLE9BQU8sQ0FBQyxJQUFJLGdCQUFnQixDQUFDLGFBQWEsSUFBSSxPQUFPLEVBQzdIO1lBQ0ksUUFBUSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztZQUNuQyxRQUFRLENBQUMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDO1NBQzNDO1FBRUQsU0FBUyxDQUFDLEdBQUcsQ0FBQyw4Q0FBOEMsR0FBRyxRQUFRLENBQUMsZUFBZSxHQUFHLE1BQU0sR0FBRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNuSSxRQUFRLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFDakQsUUFBUSxDQUFDLGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQyxhQUFhLENBQUM7UUFFMUQsTUFBTSxZQUFZLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDdEMsQ0FBQztDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhUTUxFeHBvcnRQbHVnaW4gZnJvbSBcInNjcmlwdHMvbWFpblwiXHJcbmltcG9ydCB7IE1haW5TZXR0aW5ncywgTWFpblNldHRpbmdzRGF0YSB9IGZyb20gXCIuL21haW4tc2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBSZW5kZXJMb2cgfSBmcm9tIFwic2NyaXB0cy9odG1sLWdlbmVyYXRpb24vcmVuZGVyLWxvZ1wiO1xyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWdyYXRlU2V0dGluZ3Moc2V0dGluZ3M6IE1haW5TZXR0aW5nc0RhdGEpXHJcbntcclxuICAgIGlmIChzZXR0aW5ncy5zZXR0aW5nc1ZlcnNpb24gPT0gSFRNTEV4cG9ydFBsdWdpbi5wbHVnaW5WZXJzaW9uKSByZXR1cm47XHJcblxyXG4gICAgaWYgKChzZXR0aW5ncy5zZXR0aW5nc1ZlcnNpb24gPT0gXCIxLjcuM1wiIHx8IHNldHRpbmdzLnNldHRpbmdzVmVyc2lvbiA9PSBcIjAuMC4wXCIpICYmIEhUTUxFeHBvcnRQbHVnaW4ucGx1Z2luVmVyc2lvbiA9PSBcIjEuNy40XCIpXHJcbiAgICB7XHJcbiAgICAgICAgc2V0dGluZ3MuaW5jcmVtZW50YWxFeHBvcnQgPSBmYWxzZTtcclxuICAgICAgICBzZXR0aW5ncy5kZWxldGVPbGRFeHBvcnRlZEZpbGVzID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgUmVuZGVyTG9nLmxvZyhcIk1pZ3JhdGluZyB3ZWJwYWdlLWh0bWwtZXhwb3J0IHNldHRpbmdzIGZyb20gXCIgKyBzZXR0aW5ncy5zZXR0aW5nc1ZlcnNpb24gKyBcIiB0byBcIiArIEhUTUxFeHBvcnRQbHVnaW4ucGx1Z2luVmVyc2lvbik7XHJcbiAgICBzZXR0aW5ncy51cGdyYWRlZEZyb20gPSBzZXR0aW5ncy5zZXR0aW5nc1ZlcnNpb247XHJcbiAgICBzZXR0aW5ncy5zZXR0aW5nc1ZlcnNpb24gPSBIVE1MRXhwb3J0UGx1Z2luLnBsdWdpblZlcnNpb247XHJcblxyXG4gICAgYXdhaXQgTWFpblNldHRpbmdzLnNhdmVTZXR0aW5ncygpO1xyXG59Il19